// <auto-generated />
using System;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Infrastructure;
using Microsoft.EntityFrameworkCore.Migrations;
using Microsoft.EntityFrameworkCore.Storage.ValueConversion;
using Npgsql.EntityFrameworkCore.PostgreSQL.Metadata;
using casefile.data.configuration;

#nullable disable

namespace casefile.data.Migrations
{
    [DbContext(typeof(CaseFileContext))]
    [Migration("20260212174106_AddColumnConstraintsFromDtoValidation")]
    partial class AddColumnConstraintsFromDtoValidation
    {
        /// <inheritdoc />
        protected override void BuildTargetModel(ModelBuilder modelBuilder)
        {
#pragma warning disable 612, 618
            modelBuilder
                .HasAnnotation("ProductVersion", "10.0.2")
                .HasAnnotation("Relational:MaxIdentifierLength", 63);

            NpgsqlModelBuilderExtensions.UseIdentityByDefaultColumns(modelBuilder);

            modelBuilder.Entity("casefile.domain.model.Client", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid")
                        .HasColumnName("id");

                    b.Property<DateTime>("CreeLe")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("cree_le");

                    b.Property<string>("Email")
                        .IsRequired()
                        .HasMaxLength(320)
                        .HasColumnType("character varying(320)")
                        .HasColumnName("email");

                    b.Property<string>("Nom")
                        .IsRequired()
                        .HasMaxLength(150)
                        .HasColumnType("character varying(150)")
                        .HasColumnName("nom");

                    b.Property<string>("Prenom")
                        .IsRequired()
                        .HasMaxLength(150)
                        .HasColumnType("character varying(150)")
                        .HasColumnName("prenom");

                    b.Property<Guid?>("SchemaClientId")
                        .HasColumnType("uuid")
                        .HasColumnName("schema_client_id");

                    b.Property<string>("Telephone")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasColumnName("telephone");

                    b.Property<Guid?>("TemplateDossierId")
                        .HasColumnType("uuid")
                        .HasColumnName("template_dossier_id");

                    b.HasKey("Id")
                        .HasName("pk_clients");

                    b.HasIndex("Email")
                        .IsUnique()
                        .HasDatabaseName("ix_clients_email");

                    b.HasIndex("SchemaClientId")
                        .HasDatabaseName("ix_clients_schema_client_id");

                    b.HasIndex("TemplateDossierId")
                        .HasDatabaseName("ix_clients_template_dossier_id");

                    b.ToTable("clients", (string)null);
                });

            modelBuilder.Entity("casefile.domain.model.CourrielEnvoye", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid")
                        .HasColumnName("id");

                    b.Property<string>("A")
                        .IsRequired()
                        .HasMaxLength(320)
                        .HasColumnType("character varying(320)")
                        .HasColumnName("a");

                    b.Property<Guid?>("DossierClientId")
                        .HasColumnType("uuid")
                        .HasColumnName("dossier_client_id");

                    b.Property<DateTime>("EnvoyeLe")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("envoye_le");

                    b.Property<string>("PiecesJointes")
                        .IsRequired()
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)")
                        .HasColumnName("pieces_jointes");

                    b.Property<string>("Sujet")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)")
                        .HasColumnName("sujet");

                    b.HasKey("Id")
                        .HasName("pk_courriels_envoyes");

                    b.HasIndex("DossierClientId")
                        .HasDatabaseName("ix_courriels_envoyes_dossier_client_id");

                    b.ToTable("courriels_envoyes", (string)null);
                });

            modelBuilder.Entity("casefile.domain.model.DefinitionAttribut", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid")
                        .HasColumnName("id");

                    b.Property<string>("Cle")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasColumnName("cle");

                    b.Property<bool>("EstRequis")
                        .HasColumnType("boolean")
                        .HasColumnName("est_requis");

                    b.Property<string>("Libelle")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)")
                        .HasColumnName("libelle");

                    b.Property<Guid?>("SchemaClientId")
                        .HasColumnType("uuid")
                        .HasColumnName("schema_client_id");

                    b.Property<int>("Type")
                        .HasColumnType("integer")
                        .HasColumnName("type");

                    b.Property<string>("ValeurDefaut")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)")
                        .HasColumnName("valeur_defaut");

                    b.HasKey("Id")
                        .HasName("pk_definitions_attributs");

                    b.HasIndex("Cle")
                        .HasDatabaseName("ix_definitions_attributs_cle");

                    b.HasIndex("SchemaClientId")
                        .HasDatabaseName("ix_definitions_attributs_schema_client_id");

                    b.ToTable("definitions_attributs", (string)null);
                });

            modelBuilder.Entity("casefile.domain.model.DocumentAttendu", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid")
                        .HasColumnName("id");

                    b.Property<Guid?>("IdTypeDocument")
                        .HasColumnType("uuid")
                        .HasColumnName("id_type_document");

                    b.Property<Guid?>("TemplateDossierElementId")
                        .HasColumnType("uuid")
                        .HasColumnName("template_dossier_element_id");

                    b.HasKey("Id")
                        .HasName("pk_documents_attendus");

                    b.HasIndex("IdTypeDocument")
                        .HasDatabaseName("ix_documents_attendus_id_type_document");

                    b.HasIndex("TemplateDossierElementId")
                        .HasDatabaseName("ix_documents_attendus_template_dossier_element_id");

                    b.ToTable("documents_attendus", (string)null);
                });

            modelBuilder.Entity("casefile.domain.model.DocumentClient", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid")
                        .HasColumnName("id");

                    b.Property<DateTime>("AjouteLe")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("ajoute_le");

                    b.Property<string>("CheminPhysique")
                        .IsRequired()
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)")
                        .HasColumnName("chemin_physique");

                    b.Property<Guid?>("DossierClientId")
                        .HasColumnType("uuid")
                        .HasColumnName("dossier_client_id");

                    b.Property<string>("Extension")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)")
                        .HasColumnName("extension");

                    b.Property<string>("NomOriginal")
                        .IsRequired()
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)")
                        .HasColumnName("nom_original");

                    b.Property<string>("NomStandardise")
                        .IsRequired()
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)")
                        .HasColumnName("nom_standardise");

                    b.Property<Guid?>("TypeDocumentId")
                        .HasColumnType("uuid")
                        .HasColumnName("type_document_id");

                    b.HasKey("Id")
                        .HasName("pk_documents_clients");

                    b.HasIndex("DossierClientId")
                        .HasDatabaseName("ix_documents_clients_dossier_client_id");

                    b.HasIndex("TypeDocumentId")
                        .HasDatabaseName("ix_documents_clients_type_document_id");

                    b.ToTable("documents_clients", (string)null);
                });

            modelBuilder.Entity("casefile.domain.model.DossierClient", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid")
                        .HasColumnName("id");

                    b.Property<string>("CheminVirtuel")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)")
                        .HasColumnName("chemin_virtuel");

                    b.Property<Guid?>("ClientId")
                        .HasColumnType("uuid")
                        .HasColumnName("client_id");

                    b.Property<string>("Nom")
                        .IsRequired()
                        .HasMaxLength(150)
                        .HasColumnType("character varying(150)")
                        .HasColumnName("nom");

                    b.HasKey("Id")
                        .HasName("pk_dossiers_clients");

                    b.HasIndex("ClientId")
                        .HasDatabaseName("ix_dossiers_clients_client_id");

                    b.ToTable("dossiers_clients", (string)null);
                });

            modelBuilder.Entity("casefile.domain.model.ProfilEntreprise", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid")
                        .HasColumnName("id");

                    b.Property<string>("Adresse")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)")
                        .HasColumnName("adresse");

                    b.Property<string>("Email")
                        .IsRequired()
                        .HasMaxLength(320)
                        .HasColumnType("character varying(320)")
                        .HasColumnName("email");

                    b.Property<string>("LogoPath")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)")
                        .HasColumnName("logo_path");

                    b.Property<string>("Nom")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)")
                        .HasColumnName("nom");

                    b.Property<string>("Signature")
                        .HasMaxLength(4000)
                        .HasColumnType("character varying(4000)")
                        .HasColumnName("signature");

                    b.Property<string>("Telephone")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasColumnName("telephone");

                    b.HasKey("Id")
                        .HasName("pk_profils_entreprise");

                    b.ToTable("profils_entreprise", (string)null);
                });

            modelBuilder.Entity("casefile.domain.model.RegleNommageDocument", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid")
                        .HasColumnName("id");

                    b.Property<string>("Pattern")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)")
                        .HasColumnName("pattern");

                    b.HasKey("Id")
                        .HasName("pk_regles_nommage_documents");

                    b.ToTable("regles_nommage_documents", (string)null);
                });

            modelBuilder.Entity("casefile.domain.model.SchemaClient", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid")
                        .HasColumnName("id");

                    b.Property<string>("Nom")
                        .IsRequired()
                        .HasMaxLength(150)
                        .HasColumnType("character varying(150)")
                        .HasColumnName("nom");

                    b.HasKey("Id")
                        .HasName("pk_schemas_clients");

                    b.ToTable("schemas_clients", (string)null);
                });

            modelBuilder.Entity("casefile.domain.model.TemplateCourriel", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid")
                        .HasColumnName("id");

                    b.Property<string>("Corps")
                        .IsRequired()
                        .HasMaxLength(20000)
                        .HasColumnType("character varying(20000)")
                        .HasColumnName("corps");

                    b.Property<string>("Nom")
                        .IsRequired()
                        .HasMaxLength(150)
                        .HasColumnType("character varying(150)")
                        .HasColumnName("nom");

                    b.Property<Guid?>("ProfilEntrepriseId")
                        .HasColumnType("uuid")
                        .HasColumnName("profil_entreprise_id");

                    b.Property<string>("Sujet")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)")
                        .HasColumnName("sujet");

                    b.Property<Guid?>("TemplateDossierId")
                        .HasColumnType("uuid")
                        .HasColumnName("template_dossier_id");

                    b.HasKey("Id")
                        .HasName("pk_templates_courriel");

                    b.HasIndex("ProfilEntrepriseId")
                        .HasDatabaseName("ix_templates_courriel_profil_entreprise_id");

                    b.HasIndex("TemplateDossierId")
                        .HasDatabaseName("ix_templates_courriel_template_dossier_id");

                    b.ToTable("templates_courriel", (string)null);
                });

            modelBuilder.Entity("casefile.domain.model.TemplateDossier", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid")
                        .HasColumnName("id");

                    b.Property<string>("Description")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)")
                        .HasColumnName("description");

                    b.Property<string>("Nom")
                        .IsRequired()
                        .HasMaxLength(150)
                        .HasColumnType("character varying(150)")
                        .HasColumnName("nom");

                    b.HasKey("Id")
                        .HasName("pk_templates_dossier");

                    b.ToTable("templates_dossier", (string)null);
                });

            modelBuilder.Entity("casefile.domain.model.TemplateDossierElement", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid")
                        .HasColumnName("id");

                    b.Property<Guid?>("IdParent")
                        .HasColumnType("uuid")
                        .HasColumnName("id_parent");

                    b.Property<string>("Nom")
                        .IsRequired()
                        .HasMaxLength(150)
                        .HasColumnType("character varying(150)")
                        .HasColumnName("nom");

                    b.Property<int>("Ordre")
                        .HasColumnType("integer")
                        .HasColumnName("ordre");

                    b.Property<Guid?>("TemplateDossierId")
                        .HasColumnType("uuid")
                        .HasColumnName("template_dossier_id");

                    b.HasKey("Id")
                        .HasName("pk_templates_dossier_elements");

                    b.HasIndex("IdParent")
                        .HasDatabaseName("ix_templates_dossier_elements_id_parent");

                    b.HasIndex("TemplateDossierId")
                        .HasDatabaseName("ix_templates_dossier_elements_template_dossier_id");

                    b.ToTable("templates_dossier_elements", null, t =>
                        {
                            t.HasCheckConstraint("CK_template_dossier_element_ordre_non_negatif", "Ordre >= 0");
                        });
                });

            modelBuilder.Entity("casefile.domain.model.TypeDocument", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid")
                        .HasColumnName("id");

                    b.Property<string>("Code")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasColumnName("code");

                    b.Property<string>("DossierCibleParDefaut")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)")
                        .HasColumnName("dossier_cible_par_defaut");

                    b.Property<string>("ExtensionsPermises")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)")
                        .HasColumnName("extensions_permises");

                    b.Property<string>("Nom")
                        .IsRequired()
                        .HasMaxLength(150)
                        .HasColumnType("character varying(150)")
                        .HasColumnName("nom");

                    b.Property<Guid?>("RegleNommageDocumentId")
                        .HasColumnType("uuid")
                        .HasColumnName("regle_nommage_document_id");

                    b.HasKey("Id")
                        .HasName("pk_types_document");

                    b.HasIndex("Code")
                        .IsUnique()
                        .HasDatabaseName("ix_types_document_code");

                    b.HasIndex("RegleNommageDocumentId")
                        .IsUnique()
                        .HasDatabaseName("ix_types_document_regle_nommage_document_id");

                    b.ToTable("types_document", (string)null);
                });

            modelBuilder.Entity("casefile.domain.model.ValeurAttributClient", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid")
                        .HasColumnName("id");

                    b.Property<string>("Cle")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasColumnName("cle");

                    b.Property<Guid?>("ClientId")
                        .HasColumnType("uuid")
                        .HasColumnName("client_id");

                    b.Property<string>("Valeur")
                        .IsRequired()
                        .HasMaxLength(4000)
                        .HasColumnType("character varying(4000)")
                        .HasColumnName("valeur");

                    b.HasKey("Id")
                        .HasName("pk_valeurs_attributs_clients");

                    b.HasIndex("Cle")
                        .HasDatabaseName("ix_valeurs_attributs_clients_cle");

                    b.HasIndex("ClientId", "Cle")
                        .IsUnique()
                        .HasDatabaseName("ix_valeurs_attributs_clients_client_id_cle");

                    b.ToTable("valeurs_attributs_clients", (string)null);
                });

            modelBuilder.Entity("casefile.domain.model.Client", b =>
                {
                    b.HasOne("casefile.domain.model.SchemaClient", "SchemaClient")
                        .WithMany()
                        .HasForeignKey("SchemaClientId")
                        .OnDelete(DeleteBehavior.SetNull)
                        .HasConstraintName("fk_clients_schemas_clients_schema_client_id");

                    b.HasOne("casefile.domain.model.TemplateDossier", "TemplateDossier")
                        .WithMany()
                        .HasForeignKey("TemplateDossierId")
                        .OnDelete(DeleteBehavior.SetNull)
                        .HasConstraintName("fk_clients_templates_dossier_template_dossier_id");

                    b.Navigation("SchemaClient");

                    b.Navigation("TemplateDossier");
                });

            modelBuilder.Entity("casefile.domain.model.CourrielEnvoye", b =>
                {
                    b.HasOne("casefile.domain.model.DossierClient", null)
                        .WithMany("Courriels")
                        .HasForeignKey("DossierClientId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .HasConstraintName("fk_courriels_envoyes_dossiers_clients_dossier_client_id");
                });

            modelBuilder.Entity("casefile.domain.model.DefinitionAttribut", b =>
                {
                    b.HasOne("casefile.domain.model.SchemaClient", null)
                        .WithMany("Definitions")
                        .HasForeignKey("SchemaClientId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .HasConstraintName("fk_definitions_attributs_schemas_clients_schema_client_id");
                });

            modelBuilder.Entity("casefile.domain.model.DocumentAttendu", b =>
                {
                    b.HasOne("casefile.domain.model.TypeDocument", "TypeDocument")
                        .WithMany()
                        .HasForeignKey("IdTypeDocument")
                        .OnDelete(DeleteBehavior.SetNull)
                        .HasConstraintName("fk_documents_attendus_types_document_id_type_document");

                    b.HasOne("casefile.domain.model.TemplateDossierElement", null)
                        .WithMany("DocumentsAttendus")
                        .HasForeignKey("TemplateDossierElementId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .HasConstraintName("fk_documents_attendus_templates_dossier_elements_template_doss");

                    b.Navigation("TypeDocument");
                });

            modelBuilder.Entity("casefile.domain.model.DocumentClient", b =>
                {
                    b.HasOne("casefile.domain.model.DossierClient", null)
                        .WithMany("Documents")
                        .HasForeignKey("DossierClientId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .HasConstraintName("fk_documents_clients_dossiers_clients_dossier_client_id");

                    b.HasOne("casefile.domain.model.TypeDocument", "TypeDocument")
                        .WithMany()
                        .HasForeignKey("TypeDocumentId")
                        .OnDelete(DeleteBehavior.SetNull)
                        .HasConstraintName("fk_documents_clients_types_document_type_document_id");

                    b.Navigation("TypeDocument");
                });

            modelBuilder.Entity("casefile.domain.model.DossierClient", b =>
                {
                    b.HasOne("casefile.domain.model.Client", null)
                        .WithMany("Dossiers")
                        .HasForeignKey("ClientId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .HasConstraintName("fk_dossiers_clients_clients_client_id");
                });

            modelBuilder.Entity("casefile.domain.model.TemplateCourriel", b =>
                {
                    b.HasOne("casefile.domain.model.ProfilEntreprise", null)
                        .WithMany("TemplatesCourriel")
                        .HasForeignKey("ProfilEntrepriseId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .HasConstraintName("fk_templates_courriel_profils_entreprise_profil_entreprise_id");

                    b.HasOne("casefile.domain.model.TemplateDossier", "TemplateDossier")
                        .WithMany()
                        .HasForeignKey("TemplateDossierId")
                        .OnDelete(DeleteBehavior.SetNull)
                        .HasConstraintName("fk_templates_courriel_templates_dossier_template_dossier_id");

                    b.Navigation("TemplateDossier");
                });

            modelBuilder.Entity("casefile.domain.model.TemplateDossierElement", b =>
                {
                    b.HasOne("casefile.domain.model.TemplateDossierElement", "Parent")
                        .WithMany("Enfants")
                        .HasForeignKey("IdParent")
                        .OnDelete(DeleteBehavior.Restrict)
                        .HasConstraintName("fk_templates_dossier_elements_templates_dossier_elements_id_pa");

                    b.HasOne("casefile.domain.model.TemplateDossier", null)
                        .WithMany("Elements")
                        .HasForeignKey("TemplateDossierId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .HasConstraintName("fk_templates_dossier_elements_templates_dossier_template_dossi");

                    b.Navigation("Parent");
                });

            modelBuilder.Entity("casefile.domain.model.TypeDocument", b =>
                {
                    b.HasOne("casefile.domain.model.RegleNommageDocument", "RegleNommage")
                        .WithOne()
                        .HasForeignKey("casefile.domain.model.TypeDocument", "RegleNommageDocumentId")
                        .OnDelete(DeleteBehavior.SetNull)
                        .HasConstraintName("fk_types_document_regles_nommage_documents_regle_nommage_docum");

                    b.Navigation("RegleNommage");
                });

            modelBuilder.Entity("casefile.domain.model.ValeurAttributClient", b =>
                {
                    b.HasOne("casefile.domain.model.Client", null)
                        .WithMany("ValeursAttributs")
                        .HasForeignKey("ClientId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .HasConstraintName("fk_valeurs_attributs_clients_clients_client_id");
                });

            modelBuilder.Entity("casefile.domain.model.Client", b =>
                {
                    b.Navigation("Dossiers");

                    b.Navigation("ValeursAttributs");
                });

            modelBuilder.Entity("casefile.domain.model.DossierClient", b =>
                {
                    b.Navigation("Courriels");

                    b.Navigation("Documents");
                });

            modelBuilder.Entity("casefile.domain.model.ProfilEntreprise", b =>
                {
                    b.Navigation("TemplatesCourriel");
                });

            modelBuilder.Entity("casefile.domain.model.SchemaClient", b =>
                {
                    b.Navigation("Definitions");
                });

            modelBuilder.Entity("casefile.domain.model.TemplateDossier", b =>
                {
                    b.Navigation("Elements");
                });

            modelBuilder.Entity("casefile.domain.model.TemplateDossierElement", b =>
                {
                    b.Navigation("DocumentsAttendus");

                    b.Navigation("Enfants");
                });
#pragma warning restore 612, 618
        }
    }
}
